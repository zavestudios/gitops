---
apiVersion: v1
kind: ConfigMap
metadata:
  name: bigbang-values
  namespace: bigbang
data:
  values.yaml: |
    # Big Bang values for sandbox environment
    # Minimal scope: Istio + ArgoCD + Monitoring (skip GitLab)

    # Domain configuration - routed via Cloudflare Tunnel
    domain: sandbox.zavestudios.com

    # Enable Istio (old structure for BB 2.19.0)
    istioOperator:
      enabled: true

    istio:
      enabled: true
      values:
        # Override Iron Bank images with public Docker Hub images
        global:
          hub: docker.io/istio
          tag: 1.20.0

    # Addons
    addons:
      gitlab:
        enabled: false
      gitlabRunner:
        enabled: false
      argocd:
        enabled: true
        values:
          # Override Iron Bank images with public images
          global:
            image:
              repository: quay.io/argoproj/argocd
              tag: v2.10.0
          dex:
            image:
              repository: quay.io/dexidp/dex
              tag: v2.37.0
          redis:
            image:
              repository: docker.io/redis
              tag: "7.0"

    # Monitoring stack
    monitoring:
      enabled: true
      values:
        # Override Iron Bank images with public images
        prometheus:
          prometheusSpec:
            image:
              registry: docker.io
              repository: prom/prometheus
              tag: v2.50.0
        alertmanager:
          alertmanagerSpec:
            image:
              registry: docker.io
              repository: prom/alertmanager
              tag: v0.27.0
        grafana:
          image:
            registry: docker.io
            repository: grafana/grafana
            tag: 10.3.0

    kiali:
      enabled: true
      values:
        deployment:
          image_name: quay.io/kiali/kiali
          image_version: v1.79.0
