---
apiVersion: v1
kind: ConfigMap
metadata:
  name: bigbang-values
  namespace: bigbang
data:
  values.yaml: |
    # Big Bang values for sandbox environment
    # Minimal scope: Istio + ArgoCD + Monitoring
    # Disable packages requiring Iron Bank access

    # Domain configuration - routed via Cloudflare Tunnel
    domain: sandbox.zavestudios.com

    # Disable policy/security packages (require Iron Bank)
    gatekeeper:
      enabled: false

    kyverno:
      enabled: false

    kyvernoPolicies:
      enabled: false

    clusterAuditor:
      enabled: false

    # Disable logging stack (require Iron Bank)
    eckOperator:
      enabled: false

    elasticsearchKibana:
      enabled: false

    fluentbit:
      enabled: false

    promtail:
      enabled: false

    loki:
      enabled: false

    # Disable security scanning (require Iron Bank)
    neuvector:
      enabled: false

    twistlock:
      enabled: false

    # Enable Istio with public images
    istioOperator:
      enabled: true
      values:
        # Override Iron Bank image with public Docker Hub image
        image:
          repository: docker.io/istio/operator
          tag: 1.20.0

    istio:
      enabled: true
      values:
        # Override Iron Bank images with public Docker Hub images
        global:
          hub: docker.io/istio
          tag: 1.20.0

    # Addons
    addons:
      gitlab:
        enabled: false
      gitlabRunner:
        enabled: false
      argocd:
        enabled: true
        values:
          # Override Iron Bank images with public images
          global:
            image:
              repository: quay.io/argoproj/argocd
              tag: v2.10.0
          dex:
            image:
              repository: quay.io/dexidp/dex
              tag: v2.37.0
          redis:
            image:
              repository: docker.io/redis
              tag: "7.0"

    # Monitoring stack with public images
    monitoring:
      enabled: true
      values:
        # Override Iron Bank images with public images
        prometheus:
          prometheusSpec:
            image:
              registry: docker.io
              repository: prom/prometheus
              tag: v2.50.0
        alertmanager:
          alertmanagerSpec:
            image:
              registry: docker.io
              repository: prom/alertmanager
              tag: v0.27.0
        grafana:
          image:
            registry: docker.io
            repository: grafana/grafana
            tag: 10.3.0

    # Service mesh observability
    jaeger:
      enabled: false  # Disable for now, can enable later with public images

    kiali:
      enabled: true
      values:
        deployment:
          image_name: quay.io/kiali/kiali
          image_version: v1.79.0
